1. 임계 구역(Ciritical-Section)
	- 임계구역의 개념 및 특징
		- 어떠한 프로세스가 임계 구역으로 정해진 구역에서 실행중이면 다른 프로세스들은 해당 임계 구역의 코드들을 실행하지 못하는 구역을 임계 구역이라 한다.
		- 임계 구역에서는 다른 프로세스와 공유 자원의 값을 변경하거나, 테이블을 갱신하거나 파일을 쓰거나 하는 등의 작업을 수행한다.
		- 두 개 이상의 프로세스가 임계 구역에 존재할 수 없다.
2. 코드들의 구역 종류
	- 진입 구역(Entry-Section) : 임계 구역에 들어가기 위해서 허락을 요청하는 코드 구역
	- 임계 구역(Critical-Section) : 다른 프로세스와 공유하는 자원을 갱신하거나 접근하는 구역
	- 퇴출 구역(Exit-Section) : 임계 구역에서 나오는 구역
	- 나머지 구역(Remainder-Section) : 진입->임계->퇴출 구역을 제외한 나머지 구역
	전형적 프로세스의 일반적인 구조
	![[Pasted image 20240319112653.png]]
3. 임계 구역 해결안에 대한 3가지 요구 조건
	임계 구역 문제에 대한 해결안은 다음의 3가지 요구 조건을 충족해야 한다. 일반적으로 상호 배제를 만족하게 되면 교착 상태(DeadLock)과 기아(Starvation)문제가 발생한다.
	1. 상호 배제(Mutual Exclusion) : 프로세스 P가 자기의 임계 구역에서 실행된다면, 다른 프로세스들은 그들 자신의 임계 구역에서 실행될 수 없다.
	2. 진행(Progress, 교착(DeadLock) 회피) : 자기의 임계 구역에서 실행되는 프로세스가 없고 다른 프로세스들의 임계 구역으로 진입하려고 하는 프로세스들이 존재한다면, 그 프로세스들은 무한정 기다리면 안되고 적절한 시기에 진입을 시켜야 한다.
	3. 한정된 대기(Bounded Waiting, 기아(Starvation) 회피) : 프로세스가 자기의 임계 구역에 진입하려는 요청을 한 순간부터 그 요청이 허용될 때 까지 다른 프로세스들이 그들 자신의 임계 구역에 진입하도록 허용되는 횟수에 제한이 있어야 한다.
	- 경쟁 상태(Race Condition)에 대한 예제
		다음 그림과 같이 운영체제의 커널 영역에서 경쟁 상태가 발생할 수 있다. 대표적인 예제로 프로세스의 fork() 호출이 있다. 한 프로세스가 fork(I) 호출시 자식 프로세스가 생성되고 그 작식 프로세스의 pid(프로세스 번호)를 반환한다. 그러나 자식 프로세스의 pid를 반환하고 숫자를 증가시키려고 하는 순간 다른 프로세스가 fork()를 호출하여 동일한 pid 번호를 가진 자식 프로세스를 생성하는 가능성이 있다. 결국 프로세스 번호가 같은 자식 프로세스가 2개 생겨난 것이다. 이는 두 자식 프로세스의 충돌이 발생할 것이다.
		![[Pasted image 20240319114217.png]]
4. 단일 CPU 코어 환경에서의 해결 방법
	- 공유 자원을 수정하는 동안 발생하는 인터럽트 방지
		- 예를 들어 count++와 같은 명령어를 수행한다면 기계어 레벨 수준에서 Load, Add, Store 명령어를 수행하는 동안에는 인터럽트를 못하게 시도한다.
		- 하지만 임계 구역에 실행하는 동안에는 공유 자원을 무결성있게 만드는 대신 멀티 프로세서 환경(CPU 코어가 2개 이상)에서는 실현이 불가능하다. 멀티 프로세서 환경에서는 시스템 성능의 저하로 이어진다.
5. 선점형 커널과 비선점형 커널을 이용한 방법
	- 비선점형 커널의 개념 및 특징
		- 비선점형 커널은 어떤 프로세스가 커널 모드에 진입을 하게 되면 그 프로세스는 자발적으로 커널 모드를 종료할 때 까지는 경쟁 상태로 부터 자유로운 모드이다.
		- 예를 ㄹ들어 어떤 한 프로세스가 count++을 수행할 때 비선점형 커널 모드로 수행하게 되면 count++을 다 마칠 때 까지는 문맥 교환(Context Switching)이 발생하지 않는다.
		- 비선점형 커널의 단점은 비선점형이기 때문에 성능이 좋지 않다는 것이다.
	- 선점형 커널의 개념 및 특징
		- 선점형 커널은 어떤 프로세스가 커널 모드에서 수행중일 때 다른 프로세스가 선점하는 것을 허용하는 모드ㅇ다.
		- 선점형 커널 모드는 다루기 어렵고 동기화 문제가 발생할 수 있다.
		- 비선점형 커널보다 더욱 반응적이고 성능이 좋다.