자가 균형 이진 트리(self-balancing binary seartch tree)로, 대표적으로는 연관 배열 등을 구현하는데 사용되는 자료구조. 구현에 있어서 복잡하지만 사용에서 효율적이고, 최악의 경우에도 O(logN)의 시간 복잡도로 삽입, 삭제, 검색을 할 수 있다.

- 용도
	자료의 삽입, 삭제, 검색에서 최악의 경우에도 일정한 실행 시간을 보장. 이는 실시간 처리와 같은 실행 시간이 중요한 경우 유용하게 사용될 뿐만 아니라, 일정한 실행 시간을 보장하는 또 다른 자료구조를 만드는 데에도 쓸모가 있다.(ex : 각종 기하학 계산에 사용되는 많은 자료구조들이 레드-블랙 트리를 기반으로 만들어져있다.)
	레드-블랙 트리는 함수형 프로그래밍에서 특히 유용하다. 함수형 프로그래밍에서 사용되는 연관 배열이나 집합(set) 등을 내부적으로 레드-블랙 트리로 구현해 놓은 경우가 많다.
	레드-블랙 트리는 2-3-4 트리와 등장변환이 가능하다.(isometry) 즉, 모든 2-3-4 트리에는 구성 원소와 그 순서(order)가 같은 레드-블랙 트리가 최소한 하나 이상 존재한다는 것이다. 2-3-4 트리에서의 삽입, 삭제 과정은 레드-블랙 트리에서의 색 전환(color-flipping)과 회전(rotation)과 같은 개념이다.
- 특성
	![[Pasted image 20231207051247.png]]
	레드-블랙 트리는 각각의 노드가 레드나 블랙인 색상 속성을 가지고 있는 이진 탐색 트리이다. 이진 탐색 트리가 가지고 있는 일반적인 조건에 다음과 같은 추가적 조건을 만족해야 유효한 레드-블랙 트리가 된다.
	1. 노드는 레드 혹은 블랙 중의 하나이다.
	2. 루트 노드는 브랙이다.
	3. 모든 리프 노드들은 블랙이다.
	4. 레드 노드의 자식 노드 양쪽은 언제나 모두 블랙이다.(즉, 레드 노드는 연달아 나타낼 수 없으며, 블랙 노드만이 레드 노드의 부모 노드가 될 수 있다, 또한 블랙 노드의 자식은 블랙일 수 있다.)
	5. 어떤 노드로부터 시작되어 그에 속한 하위 리프 노드에 도달하는 모든 경로에는 리프 노드를 제외하면 모두 같은 개수의 블랙 노드가 있다.
- 동작
	- Insert
		- 새로운 노드는 항상 빨간색이다.
		- 하지만 이럴경우 Double Red 현상이 발생한다.
			- 삼촌 노드가 검은색일 경우 -> Restructing
				- 새로운 노드(N), 부모 노드(P), 조상 노드(G)를 오름차순으로 정렬
				- 셋 중 중간값을 부모로 만들고 나머지 둘을 자식으로 만든다.
				- 새로 부모가 된 노드를 검은색으로 만들고 나머지 자식들을 빨간색으로 만든다.
				![[Pasted image 20231209052404.png]]
			- 삼촌 노드가 빨간색일 경우 -> Recoloring
				- 새로운 노드(N)의 부모(P)와 삼촌(U)를 검은색으로 바꾸고 조상(G)을 빨간색으로 바꾼다.
					- 조상(G)이 루트 노드라면 검은색으로 바꾼다.
					- 조상(G)을 빨간색으로 바꿨을 때 또다시 Double Red가 발생한다면 또 Restructing 혹은 ReColoring을 진행해서 Double Red 현상을 해결
				![[Pasted image 20231209052636.png]]
				![[Pasted image 20231209052641.png]]
				![[Pasted image 20231209052645.png]]
	- Delete
		- 이진 탐색 트리에서의 삭제 방법을 따라 노드 삭제 후 색상 조정
		- 삭제할 노드가 두 개의 자식 노드를 가지고 있을 경우
			- 오른쪽 서브 트리에서 최소 원소를 가진 노드의 값과 부모 노드의 값을 스왑 후 해당 노드 삭제
			- 자식 노드의 색상은 변경 없이 값만 변경 -> 레드 블랙 트리 특성에 영향을 끼치지 않는다.
		- 부모 노드를 삭제 후 부모 노드 주변 노드의 레드 블랙 특성 위반 여
		- 타겟 노드 다음으로 큰 값을 가진 노드와 스왑 후 스왑된 노드 삭제(이진 탐색 트리의 삭제 방식)
>[!tip] 삼촌 노드
>같은 높이에 있는 옆 노드의 부모 노드를 의미